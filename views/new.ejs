<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <title>New vote</title>
  </head>
  <body>
    <header>
      <a href="/" class="main-logo">VOTE VOTE</a>
      <div class="user-box">
        <a href="/votings/new" class="create-vote">/ + /</a>
        <a href="/votings" class="my-vote">/ My page /</a>
        <a href="/logout" class="logout">/ logout /</a>
      </div>
    </header>
    <section class="create">
      <h1>New vote</h1>
      <form action="/votings/new" method="post">
        <input type="text" name="title" placeholder="title" />
        <input type="datetime-local" name="expiration" class="expired-date" />
        <div id="container">
          <div>
            <input type="text" name="selections" />
            <input type="button" value="Delete" class="delete"/>
          </div>
          <div>
            <input type="text" name="selections" />
            <input type="button" value="Delete" class="delete"/>
          </div>
        </div>
        <input type="button" value="+" id="add" />
        <input type="submit" value="Create" />
      </form>
    </section>
    <script>
      window.addEventListener('load', function() {
        document.getElementById('container')
          .addEventListener('click', function(event) {

            if (event.target.getAttribute('class') === 'delete') {
              event.target.parentNode.remove();
            }
          });

        document.getElementById('add').addEventListener('click', function() {

          const div = document.createElement('div');

          const option = document.createElement('input');
          option.setAttribute('type', 'text');
          option.setAttribute('name', 'text');
          div.appendChild(option);

          const buttonDelete = document.createElement('input');
          buttonDelete.setAttribute('type', 'button');
          buttonDelete.setAttribute('value', 'Delete');
          buttonDelete.setAttribute('class', 'delete');
          div.appendChild(buttonDelete);

          document.getElementById('container').appendChild(div);
        });
        const $expiredDate = document.querySelector(".expired-date");
        const today = new Date().toISOString().slice(0, 16);
        $expiredDate.setAttribute('value', today);
        $expiredDate.setAttribute('min', today);
      });
    </script>
</html>
